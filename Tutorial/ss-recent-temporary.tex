%======================================================================
\NEWSEC
%======================================================================
% 
%  Recent
%  History of Fields
%
%----------------------------------------------------------------------


\subsection{\ssRecentTemporary}

\begin{frame}[fragile,label=ss-recent-temporary] 
\secframetitle{\ssRecentTemporary}
\framesubtitle{Cello supports temporary fields}

  \footnotesize
\begin{tabbing}
  \code{xxx}\=\code{xxx}\=\code{xxx}\=\code{xxx}\=\kill
  \> \greencode{\% Reserve a temporary field (executed once)} \\
\>  \code{ir\_ = }\bluecode{field\_descr->insert\_temporary();} \\
\>\>\code{\vdots} \\
\> \greencode{\greencode{\% Allocate, use, then deallocate} } \\
\>\bluecode{field.allocate\_temporary(ir\_);} \\
\>\code{enzo\_float * R   = (enzo\_float*) field.unknowns(ir\_);} \\
\>\code{for (int iz=0; iz<nz\_; iz++) \{ } \\
\>\>\code{	for (int iy=0; iy<ny\_; iy++) \{ } \\
\>\>\>\code{	  for (int ix=0; ix<nx\_; ix++) \{ } \\
\>\>\>\>\code{	    int i = ix + mx\_*(iy + my\_*iz); } \\
\>\>\>\>\code{	       R[i] = \ldots } \\
\>\>\>\code{	  \} } \\
\>\>\code{	\} } \\
\>\code{      \} } \\
\>\bluecode{    field.deallocate\_temporary(ir\_); }
\end{tabbing}      

\end{frame}
